<table class="table table-hover table-bordered table-striped">
  <thead>
    <tr>
      <th colspan="5">Racer</th>
      <th colspan="3"><%= @heat1 %></th>
      <th colspan="3"><%= @heat2 %></th>
			<th>Better</th>
    </tr>

    <tr>
			<th>Rank</th>
			<th>Name</th>
      <th>Bib</th>
      <th>Boat</th>
      <th>Age</th>
      <th>Time</th>
      <th>Penalties</th>
      <th>Score</th>
      <th>Time</th>
      <th>Penalties</th>
      <th>Score</th>
			<th></th>
    </tr>
  </thead>

  <tbody>
		<% place = 1 %>
		<% lbc = '' %>
		<% lac = '' %>
		<% @best_of_by_age.each do |run| %>
			<% if place == 1 %>
				<% lbc = run['boat_class'] %>
				<% lac = run['age_class'] %>
			<% else %>
				<% if lbc != run['boat_class'] or lac != run['age_class'] %>
					<% place = 1 %>
					<% lbc = run['boat_class'] %>
					<% lac = run['age_class'] %>
				<% end %>
			<% end %>
			<tr class="<%= highlightLastRun(run, @last_run) %> <%= highlightOnCourse(run) %>">
				<td class="col-xs-1"><%= "#{place}" %></td>
				<td class="col-xs-4"><%= run['name'] %></td>
				<td class="col-xs-1"><%= run['bib'] %></td>
				<td class="col-xs-1"><%= run['boat_class'] %></td>
				<td class="col-xs-1"><%= run['age_class'] %></td>
				<% unless run['run1'].blank? %>
					<td class="col-xs-1 text-right"><%= run['run1']['raw_time'] %></td>
					<td class="col-xs-1 text-right"><%= run['run1']['total_penalties'] %></td>
					<td class="col-xs-1 text-right"><%= run['run1']['score'] %></td>
				<% else %>
					<td></td>
					<td></td>
					<td></td>
				<% end %>
				<% unless run['run2'].blank? %>
					<td class="col-xs-1 text-right"><%= run['run2']['raw_time'] %></td>
					<td class="col-xs-1 text-right"><%= run['run2']['total_penalties'] %></td>
					<td class="col-xs-1 text-right"><%= run['run2']['score'] %></td>
				<% else %>
					<td></td>
					<td></td>
					<td></td>
				<% end %>
				<td class="col-xs-1 text-right"><%= run['best'] %></td>
			</tr>
			<% place += 1 %>
		<% end %>
  </tbody>
 </table>

